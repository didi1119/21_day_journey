<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>你的森林人格 - 無憂石熊</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', 'Noto Sans TC', sans-serif;
            background-color: #F4F3F1;
        }
        .report-container {
            max-width: 800px;
            margin: auto;
        }
        .card {
            background-color: #FFFFFF;
            border-radius: 1.5rem;
            padding: 2rem;
            border: 1px solid #EAE3D4;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        }
        .section-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: #4A5C43;
            margin-bottom: 1.5rem;
            text-align: center;
        }
        
        /* Carousel Styles */
        .carousel-container {
            position: relative;
            overflow: hidden;
            border-radius: 1.5rem;
            height: 90vh;
            min-height: 500px;
            max-height: 850px;
        }
        .carousel-wrapper {
            display: flex;
            transition: transform 0.5s ease-in-out;
            height: 100%;
        }
        .carousel-slide {
            min-width: 100%;
            height: 100%;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .carousel-slide img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0.95;
            transition: opacity 0.3s ease;
            filter: drop-shadow(0 4px 20px rgba(0,0,0,0.15));
        }
        .carousel-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 20px;
            color: white;
            transition: all 0.3s ease;
            z-index: 10;
        }
        .carousel-nav:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        .carousel-nav.prev { left: 15px; }
        .carousel-nav.next { right: 15px; }

        .carousel-indicators {
            position: absolute;
            bottom: 70px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 8px;
            z-index: 10;
            background: rgba(0, 0, 0, 0.15);
            backdrop-filter: blur(10px);
            padding: 8px 12px;
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .carousel-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.5);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .carousel-indicator.active {
            background: white;
            transform: scale(1.2);
        }
        
        /* Passport Styles */
        .passport-bg {
            background-image: linear-gradient(rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 0.8)), url('https://placehold.co/800x400/A8D5BA/FFFFFF?text=Forest+Pattern');
            background-size: cover;
        }
        .imprint-slot {
            aspect-ratio: 1/1;
            background-color: rgba(255, 255, 255, 0.7);
            border: 2px dashed #B8A99A;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: #B8A99A;
            transition: all 0.3s ease;
            filter: grayscale(80%);
            opacity: 0.7;
            overflow: hidden;
            position: relative;
        }
        .imprint-slot.unlocked {
            filter: grayscale(0%);
            opacity: 1;
            background-color: #E2D9C8;
            color: #6B5F51;
            border: 2px solid #9A6A4D;
            box-shadow: 0 4px 12px rgba(154, 106, 77, 0.3);
        }
        .imprint-slot img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            position: absolute;
            top: 0;
            left: 0;
        }
        .imprint-slot .imprint-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 4px;
            text-align: center;
            font-size: 10px;
            font-weight: 500;
        }
        .imprint-slot span { font-size: 24px; }
        .imprint-slot p { font-size: 10px; margin-top: 2px; font-weight: 500;}

        /* Chart Container */
        .chart-container {
            position: relative;
            height: 320px;
            width: 320px;
            margin: 0 auto;
        }

        /* Mobile Optimizations */
        @media (max-width: 640px) {
            .card {
                padding: 1.5rem;
                border-radius: 1rem;
            }
            .carousel-container {
                height: 85vh;
                min-height: 500px;
                max-height: 700px;
            }
            .carousel-nav {
                width: 40px;
                height: 40px;
                font-size: 18px;
            }
            .chart-container {
                height: 280px;
                width: 280px;
            }
            .carousel-indicators {
                bottom: 60px;
                gap: 6px;
                padding: 6px 10px;
            }
            .carousel-indicator {
                width: 6px;
                height: 6px;
            }
        }
        
        @media (max-width: 480px) {
            .card {
                padding: 1rem;
            }
            .carousel-container {
                height: 80vh;
                min-height: 450px;
                max-height: 600px;
            }
            .chart-container {
                height: 240px;
                width: 240px;
            }
        }

        /* Touch optimization */
        .carousel-container {
            touch-action: pan-x;
        }
        .carousel-slide {
            user-select: none;
            -webkit-user-select: none;
        }

        /* Collapsible Details */
        .details-toggle {
            cursor: pointer;
            padding: 0.75rem 1rem;
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 0.5rem;
            margin-top: 1rem;
            transition: all 0.3s ease;
        }
        .details-toggle:hover {
            background: #e9ecef;
        }
        .details-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }
        .details-content.expanded {
            max-height: 2000px;
        }
        .toggle-icon {
            transition: transform 0.3s ease;
        }
        .toggle-icon.rotated {
            transform: rotate(180deg);
        }

        /* Audio Player Styling */
        .audio-player {
            display: flex;
            align-items: center;
            background-color: #F9F7F4;
            border-radius: 9999px;
            padding: 0.75rem;
            border: 1px solid #EAE3D4;
        }

        /* Accordion Styles */
        .accordion-header {
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-out, padding-top 0.5s ease-out, padding-bottom 0.5s ease-out;
            padding-left: 1rem;
            padding-right: 1rem;
        }
        .accordion-content.open {
            max-height: 500px;
            padding-top: 1rem;
            padding-bottom: 1rem;
            transition: max-height 0.5s ease-in, padding-top 0.5s ease-in, padding-bottom 0.5s ease-in;
        }
        .accordion-icon {
            transition: transform 0.3s ease;
        }
        .accordion-header.open .accordion-icon {
            transform: rotate(180deg);
        }

    </style>
</head>
<body class="p-4 sm:p-6 lg:p-8">

    <div class="report-container space-y-8">

        <!-- Section 1: Hero Carousel -->
        <div class="carousel-container shadow-lg" id="characterCarousel">
            <div class="carousel-wrapper" id="carouselWrapper">
                <!-- 32張角色圖片 -->
                <div class="carousel-slide">
                    <img src="media/image/big5/01_無憂石熊_00000.jpg" alt="無憂石熊">
                </div>
                <div class="carousel-slide">
                    <img src="media/image/big5/02_符文拾荒貓_00001.jpg" alt="符文拾荒貓">
                </div>
                <div class="carousel-slide">
                    <img src="media/image/big5/03_穴居偏執狐_00010.jpg" alt="穴居偏執狐">
                </div>
                <div class="carousel-slide">
                    <img src="media/image/big5/04_幽影頑狐_00011.jpg" alt="幽影頑狐">
                </div>
                <div class="carousel-slide">
                    <img src="media/image/big5/05_蟻工隱狐_00100.jpg" alt="蟻工隱狐">
                </div>
                <div class="carousel-slide">
                    <img src="media/image/big5/06_玄鐵智梟_00101.jpg" alt="玄鐵智梟">
                </div>
                <div class="carousel-slide">
                    <img src="media/image/big5/07_盔甲工蟻熊_00110.jpg" alt="盔甲工蟻熊">
                </div>
                <div class="carousel-slide">
                    <img src="media/image/big5/08_秘儀巧熊_00111.jpg" alt="秘儀巧熊">
                </div>
                <div class="carousel-slide">
                    <img src="media/image/big5/09_靜心龜象_01000.jpg" alt="靜心龜象">
                </div>
                <div class="carousel-slide">
                    <img src="media/image/big5/10_觀星智象_01001.jpg" alt="觀星智象">
                </div>
                <div class="carousel-slide">
                    <img src="media/image/big5/11_含羞樹懶_01010.jpg" alt="含羞樹懶">
                </div>
                <div class="carousel-slide">
                    <img src="media/image/big5/12_奇想隱士鹿_01011.jpg" alt="奇想隱士鹿">
                </div>
                <div class="carousel-slide">
                    <img src="media/image/big5/13_星河織壩狸_01100.jpg" alt="星河織壩狸">
                </div>
                <div class="carousel-slide">
                    <img src="media/image/big5/14_靜溪靈海狸_01101.jpg" alt="靜溪靈海狸">
                </div>
                <div class="carousel-slide">
                    <img src="media/image/big5/15_靜默園丁鹿_01110.jpg" alt="靜默園丁鹿">
                </div>
                <div class="carousel-slide">
                    <img src="media/image/big5/16_書庫螢兔_01111.jpg" alt="書庫螢兔">
                </div>
                <div class="carousel-slide">
                    <img src="media/image/big5/17_孤岩歌鳥_10000.jpg" alt="孤岩歌鳥">
                </div>
                <div class="carousel-slide">
                    <img src="media/image/big5/18_狂想畫猴_10001.jpg" alt="狂想畫猴">
                </div>
                <div class="carousel-slide">
                    <img src="media/image/big5/19_躁衛亂雀_10010.jpg" alt="躁衛亂雀">
                </div>
                <div class="carousel-slide">
                    <img src="media/image/big5/20_風羽智鴉_10011.jpg" alt="風羽智鴉">
                </div>
                <div class="carousel-slide">
                    <img src="media/image/big5/21_百川族長熊_10100.jpg" alt="百川族長熊">
                </div>
                <div class="carousel-slide">
                    <img src="media/image/big5/22_領航巨熊_10101.jpg" alt="領航巨熊">
                </div>
                <div class="carousel-slide">
                    <img src="media/image/big5/23_壁壘築巢松鼠_10110.jpg" alt="壁壘築巢松鼠">
                </div>
                <div class="carousel-slide">
                    <img src="media/image/big5/24_蒼穹巨匠鳥_10111.jpg" alt="蒼穹巨匠鳥">
                </div>
                <div class="carousel-slide">
                    <img src="media/image/big5/25_慶典樂猴_11000.jpg" alt="慶典樂猴">
                </div>
                <div class="carousel-slide">
                    <img src="media/image/big5/26_尋奇靈猴_11001.jpg" alt="尋奇靈猴">
                </div>
                <div class="carousel-slide">
                    <img src="media/image/big5/27_光塵絨兔_11010.jpg" alt="光塵絨兔">
                </div>
                <div class="carousel-slide">
                    <img src="media/image/big5/28_絮語風猴_11011.jpg" alt="絮語風猴">
                </div>
                <div class="carousel-slide">
                    <img src="media/image/big5/29_磐石社鹿_11100.jpg" alt="磐石社鹿">
                </div>
                <div class="carousel-slide">
                    <img src="media/image/big5/30_社群酋長鹿_11101.jpg" alt="社群酋長鹿">
                </div>
                <div class="carousel-slide">
                    <img src="media/image/big5/31_築巢守衛松鼠_11110.jpg" alt="築巢守衛松鼠">
                </div>
                <div class="carousel-slide">
                    <img src="media/image/big5/32_萬華晶鹿_11111.jpg" alt="萬華晶鹿">
                </div>
            </div>
            
            <!-- Navigation -->
            <button class="carousel-nav prev" id="prevBtn">‹</button>
            <button class="carousel-nav next" id="nextBtn">›</button>

            <!-- Gradient Overlay & Info -->
            <div class="absolute inset-0 bg-gradient-to-t from-black/50 via-black/10 to-transparent pointer-events-none"></div>
            <div class="absolute bottom-6 left-4 right-4 sm:left-6 sm:right-6 text-white pointer-events-none">
                <div class="bg-black/30 backdrop-blur-md rounded-2xl p-4 sm:p-5 border border-white/20">
                    <h1 class="text-2xl sm:text-3xl lg:text-4xl font-bold mb-1 leading-tight" id="characterName">無憂石熊</h1>
                    <p class="text-sm sm:text-base lg:text-lg opacity-90 leading-relaxed" id="characterSubtitle">Grounded Guardian | 沉穩的守護者</p>
                </div>
            </div>
            
            <!-- Indicators -->
            <div class="carousel-indicators" id="indicators"></div>
        </div>

        <!-- Section 2: Introduction - WHAT you are -->
        <div class="card">
            <h2 class="section-title">你在森林中的樣貌</h2>
            <p class="text-center text-gray-500 mb-6">根據你的測驗結果，你在森林中的化身是...</p>
            <h3 class="text-center text-3xl font-bold text-gray-800">無憂石熊</h3>
            <blockquote class="text-center italic text-gray-500 border-l-4 border-[#A8D5BA] pl-4 py-2 max-w-2xl mx-auto my-8">
                "你的溫柔，如森林厚實的苔蘚，無聲地承接一切，讓萬物得以安歇。"
            </blockquote>
            <p class="text-center text-gray-700 max-w-2xl mx-auto">
                如同棲息在寧靜森林深處的石熊，你擁有穩定而溫和的內心。你看重和諧與平靜，總能給周遭帶來安定的力量。對你而言，最舒適的狀態便是在熟悉的環境中，享受簡單而純粹的快樂。
            </p>
        </div>

        <!-- Section 3: Analysis & Growth -->
        <div class="card">
            <h2 class="section-title">特質光譜與成長路徑</h2>
            <p class="text-center text-gray-500 max-w-2xl mx-auto mb-10">
                你在測驗中的選擇，於五大性格維度中描繪出獨特的樣貌，讓我們看見了「無憂石熊」的沉穩與溫和。理解這些特質，將指引你探索內在的森林。
            </p>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-center mb-10">
                <div>
                    <h3 class="text-xl font-bold text-center text-[#6B5F51] mb-2">森林五維特質</h3>
                    <div class="chart-container">
                        <canvas id="personalityChart"></canvas>
                    </div>
                </div>
                <div>
                    <h3 class="text-lg md:text-xl font-bold text-[#6B5F51] mb-4 whitespace-nowrap">石熊的天賦</h3>
                    <ul class="space-y-3 text-gray-700">
                        <li class="flex items-start"><span class="text-[#4A5C43] mr-2 flex-shrink-0">✓</span> <span><strong class="whitespace-nowrap">情緒穩定：</strong> 像大地一樣穩固，不容易被外界的風雨動搖。</span></li>
                        <li class="flex items-start"><span class="text-[#4A5C43] mr-2 flex-shrink-0">✓</span> <span><strong class="whitespace-nowrap">高度親和：</strong> 溫暖而富有同理心，是森林中值得信賴的夥伴。</span></li>
                    </ul>
                    <h3 class="text-lg md:text-xl font-bold text-[#6B5F51] mt-6 mb-4 whitespace-nowrap">適合的森林夥伴</h3>
                    <p class="text-gray-700">與充滿好奇心的「尋路靈狐」或目標明確的「築巢河狸」同行，能為彼此帶來啟發與支持。</p>
                </div>
            </div>
            
            <!-- Accordion for Detailed Analysis -->
            <div class="border-t pt-8 mb-10">
                <h3 class="text-xl font-bold text-center text-[#6B5F51] mb-6">五維特質深度解析</h3>
                <div class="space-y-3 max-w-3xl mx-auto" id="accordion-container">
                    <!-- Accordion Item 1 -->
                    <div class="accordion-item border rounded-lg">
                        <button class="accordion-header w-full flex justify-between items-center p-4 text-left hover:bg-gray-50">
                            <span class="font-semibold text-gray-700">經驗開放性 (Openness) - 務實的傳統主義者</span>
                            <svg class="accordion-icon w-6 h-6 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div class="accordion-content">
                            <p class="text-gray-600 text-sm">你的分數偏低，顯示你如同森林中的巨石，偏好熟悉且可預測的環境。你尊重傳統，處事踏實，相信經過時間考驗的方法。對你而言，幸福來自於深化已有的體驗，而非不斷追尋新奇。</p>
                        </div>
                    </div>
                    <!-- Accordion Item 2 -->
                    <div class="accordion-item border rounded-lg">
                        <button class="accordion-header w-full flex justify-between items-center p-4 text-left hover:bg-gray-50">
                            <span class="font-semibold text-gray-700">盡責性 (Conscientiousness) - 可靠的守護者</span>
                            <svg class="accordion-icon w-6 h-6 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div class="accordion-content">
                            <p class="text-gray-600 text-sm">你的分數相當高，展現了石熊一諾千金的特質。你做事有條理、認真負責，是夥伴們可以安心信賴的對象。你對自己有要求，並會努力將事情做到最好，這種堅持是你力量的來源。</p>
                        </div>
                    </div>
                    <!-- Accordion Item 3 -->
                    <div class="accordion-item border rounded-lg">
                        <button class="accordion-header w-full flex justify-between items-center p-4 text-left hover:bg-gray-50">
                            <span class="font-semibold text-gray-700">外向性 (Extraversion) - 寧靜的獨處者</span>
                            <svg class="accordion-icon w-6 h-6 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div class="accordion-content">
                            <p class="text-gray-600 text-sm">你的分數偏低，意味著你更傾向於從寧靜的獨處或深度的二人交流中汲取能量。你並非不善社交，而是更珍視有品質的相處時光。對你而言，熱鬧的派對不如在營火旁與摯友的一次長談。</p>
                        </div>
                    </div>
                    <!-- Accordion Item 4 -->
                    <div class="accordion-item border rounded-lg">
                        <button class="accordion-header w-full flex justify-between items-center p-4 text-left hover:bg-gray-50">
                            <span class="font-semibold text-gray-700">親和性 (Agreeableness) - 溫暖的同理者</span>
                            <svg class="accordion-icon w-6 h-6 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div class="accordion-content">
                             <p class="text-gray-600 text-sm">你的分數非常高，這正是石熊溫暖內核的體現。你天性善良、富有同理心，總是優先考慮他人的感受，致力於維護團隊的和諧。你的存在，就像森林中的暖陽，讓人感到安心與舒適。</p>
                        </div>
                    </div>
                    <!-- Accordion Item 5 -->
                    <div class="accordion-item border rounded-lg">
                        <button class="accordion-header w-full flex justify-between items-center p-4 text-left hover:bg-gray-50">
                            <span class="font-semibold text-gray-700">情緒穩定性 (Emotional Stability) - 沉穩的磐石</span>
                            <svg class="accordion-icon w-6 h-6 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div class="accordion-content">
                            <p class="text-gray-600 text-sm">你的分數極低（代表情緒穩定性高），代表你擁有卓越的情緒穩定性。面對壓力和挑戰，你總能像大地一樣穩固，不容易陷入焦慮或擔憂。這種內在的平靜，是你給予自己和他人最珍貴的禮物。</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="border-t pt-8">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div>
                        <h3 class="font-bold text-lg text-gray-800 mb-3">成長的課題</h3>
                        <p class="text-gray-700">有時可能會過於安於現狀，嘗試走出舒適圈，探索森林中未知的風景，或許會有新的發現。</p>
                    </div>
                    <div>
                        <h3 class="font-bold text-lg text-gray-800 mb-3">給安於現狀的你：</h3>
                        <ul class="list-disc list-inside text-gray-700 space-y-2">
                            <li><strong class="whitespace-nowrap">走一條新的小徑：</strong> 週末去一個從未去過的地方散步。</li>
                            <li><strong class="whitespace-nowrap">嚐嚐陌生的漿果：</strong> 學習一項簡單的新技能，例如一道新菜。</li>
                            <li><strong class="whitespace-nowrap">聆聽風的聲音：</strong> 每天留出10分鐘，不帶目的地靜坐。</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Section 4: Healing Moment -->
        <div class="card">
            <h2 class="section-title">你的專屬療癒時刻</h2>
            <div class="max-w-md mx-auto">
                <p class="text-center text-gray-600 mb-4">《石熊的大地呼吸》</p>
                <div class="audio-player">
                    <button class="bg-[#4A5C43] text-white rounded-full w-12 h-12 flex items-center justify-center mr-4 text-2xl">▶</button>
                    <div class="w-full bg-gray-200 rounded-full h-2.5">
                        <div class="bg-[#A8D5BA] h-2.5 rounded-full" style="width: 15%"></div>
                    </div>
                    <span class="ml-4 text-sm text-gray-600">0:27 / 3:00</span>
                </div>
                <p class="text-center text-sm text-gray-500 mt-4">閉上眼，讓聲音引導你回歸內在的安穩。</p>
            </div>
        </div>
        
        <!-- Section 5: Park Map & Schedule -->
        <div class="card">
            <h2 class="section-title">你的專屬園區療癒地圖</h2>
            <div class="space-y-8">
                <!-- Map -->
                <div class="text-center">
                    <img src="media/image/map/B3A700DA-6EFB-4A9B-9126-9F4DBEB17014.PNG" alt="園區地圖" class="w-full max-w-lg mx-auto rounded-lg shadow-md">
                </div>
                
                <!-- Schedule -->
                <div>
                    <h3 class="text-xl font-bold text-[#6B5F51] mb-6 text-center">石熊的寧靜午後 (建議行程)</h3>
                    <ul class="space-y-4 max-w-md mx-auto">
                        <li class="flex items-center">
                            <span class="bg-[#A8D5BA] text-[#4A5C43] font-bold rounded-full w-12 h-12 text-center flex items-center justify-center mr-4 text-sm">14:00</span>
                            <span class="text-gray-700"><strong>露台午茶：</strong> 在小屋露台下方的野餐桌，享用溫暖的花草茶與點心。</span>
                        </li>
                        <li class="flex items-center">
                            <span class="bg-[#A8D5BA] text-[#4A5C43] font-bold rounded-full w-12 h-12 text-center flex items-center justify-center mr-4 text-sm">15:30</span>
                            <span class="text-gray-700"><strong>池畔時光：</strong> 漫步到寧靜的池塘邊，坐下看著水面倒影。</span>
                        </li>
                        <li class="flex items-center">
                            <span class="bg-[#A8D5BA] text-[#4A5C43] font-bold rounded-full w-12 h-12 text-center flex items-center justify-center mr-4 text-sm">17:00</span>
                            <span class="text-gray-700"><strong>熱水浴放鬆：</strong> 讓溫熱的水流洗去疲憊，為身體徹底充電。</span>
                        </li>
                        <li class="flex items-center">
                            <span class="bg-[#A8D5BA] text-[#4A5C43] font-bold rounded-full w-12 h-12 text-center flex items-center justify-center mr-4 text-sm">19:00</span>
                            <span class="text-gray-700"><strong>營火邊的溫暖：</strong> 感受火焰的跳動，享受最純粹的平靜。</span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Section 6: Passport -->
        <div class="card">
            <h2 class="section-title">你的靜謐森林護照</h2>
            <div class="space-y-8">
                <!-- Passport Info Card -->
                <div class="bg-white p-8 rounded-2xl border border-gray-200 shadow-sm">
                    <div class="flex flex-col md:flex-row gap-6 items-center">
                        <div class="relative">
                            <img src="media/image/big5/01_無憂石熊_00000.jpg" alt="石熊頭像" class="w-32 h-32 rounded-xl object-cover flex-shrink-0 shadow-md">
                            <div class="absolute bottom-2 right-2 bg-white p-2 rounded-lg shadow-sm">
                                <img src="https://placehold.co/32x32/FFFFFF/000000?text=QR" alt="友誼碼" class="w-6 h-6">
                            </div>
                        </div>
                        <div class="text-center md:text-left flex-1">
                           <h3 class="text-2xl font-bold text-gray-800 mb-4">無憂石熊</h3>
                           <div class="space-y-2 text-gray-600">
                               <p><span class="font-medium">森林ID:</span> <span id="forest-id" class="font-mono text-[#4A5C43]"></span></p>
                               <p><span class="font-medium">首次入境:</span> <span id="entry-date"></span></p>
                           </div>
                        </div>
                    </div>
                    <div class="mt-8 pt-6 border-t border-gray-200">
                         <div class="text-center">
                             <h4 class="text-lg font-bold text-gray-800 mb-2">森林夥伴關係圖鑑</h4>
                             <p class="text-sm text-gray-600 mb-6">邀請朋友測驗，解鎖你們之間獨一無二的關係洞察！</p>
                             <a href="partner_atlas.html" class="inline-block bg-[#4A5C43] text-white font-bold py-4 px-8 rounded-xl hover:bg-[#3A4A35] transition-colors duration-300 shadow-md">
                                查看我的夥伴圖鑑 (已解鎖 1/32)
                            </a>
                         </div>
                    </div>
                </div>

                <!-- Park Imprints Card -->
                <div class="bg-white p-8 rounded-2xl border border-gray-200 shadow-sm">
                    <div class="text-center mb-8">
                        <h3 class="text-xl font-bold text-gray-800 mb-3">園區限定印記</h3>
                        <p class="text-gray-600"><span class="font-semibold text-[#4A5C43]">園區限定：</span>掃描QR Code解鎖你的四個靈魂姿態！</p>
                    </div>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-6 max-w-2xl mx-auto">
                        <div class="imprint-slot unlocked">
                            <img src="media/image/big5/01/a.jpeg" alt="休憩姿態">
                            <div class="imprint-overlay">休憩</div>
                        </div>
                        <div class="imprint-slot unlocked">
                            <img src="media/image/big5/01/b.jpeg" alt="進食姿態">
                            <div class="imprint-overlay">進食</div>
                        </div>
                        <div class="imprint-slot unlocked">
                            <img src="media/image/big5/01/c.jpeg" alt="漫步姿態">
                            <div class="imprint-overlay">漫步</div>
                        </div>
                        <div class="imprint-slot unlocked">
                            <img src="media/image/big5/01/d.jpeg" alt="沉思姿態">
                            <div class="imprint-overlay">沉思</div>
                        </div>
                    </div>
                    <p class="text-center text-sm text-gray-500 mt-8 px-4">點亮任一枚印記，即可兌換一份森林贈禮！</p>
                </div>
            </div>
        </div>



        <!-- Section 7: Forest Blessing -->
        <div class="card text-center">
             <h2 class="section-title">森林的祝福</h2>
             <p class="text-gray-700 max-w-xl mx-auto">願你總能找到屬於你的那塊安穩的岩石，安然入睡。你的幸運物是「<span class="font-semibold text-[#4A5C43]">圓潤的溪石</span>」，它提醒你，溫和的力量足以抵擋時間的洪流。</p>
        </div>

        <!-- Section 8: Call to Action -->
        <div class="card text-center bg-amber-50/50">
            <h2 class="section-title">來自森林的贈禮</h2>
            <p class="text-gray-600">親愛的無憂石熊，感謝你為世界帶來穩定與溫暖。</p>
            <p class="my-3 font-semibold text-lg text-[#4A5C43]">
               點亮任一枚園區靈魂印記，即可兌換<br>「幸運溪石一顆 & 手沖暖心花草茶一杯」
            </p>
            <p class="text-sm text-gray-500">開始你的收集之旅，更多驚喜等著你！</p>
            <div class="mt-6">
                <button id="shareButton" class="bg-[#4A5C43] text-white font-bold py-3 px-8 rounded-full hover:bg-[#3A4A35] transition-colors duration-300">
                    分享我的森林人格
                </button>
                <p id="copyMessage" class="text-sm text-gray-500 mt-2 opacity-0 transition-opacity duration-300">報告連結已複製！</p>
            </div>
        </div>
        
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // 32個角色資訊
            const characters = [
                { name: '無憂石熊', subtitle: 'Grounded Guardian | 沉穩的守護者' },
                { name: '符文拾荒貓', subtitle: 'Mystical Scavenger | 神秘的拾荒者' },
                { name: '穴居偏執狐', subtitle: 'Paranoid Dweller | 偏執的居者' },
                { name: '幽影頑狐', subtitle: 'Shadow Trickster | 陰影的玩家' },
                { name: '蟻工隱狐', subtitle: 'Worker Fox | 工作的狐狸' },
                { name: '玄鐵智梟', subtitle: 'Iron Wise Owl | 鋼鐵智者' },
                { name: '盔甲工蟻熊', subtitle: 'Armored Worker | 裝甲工作者' },
                { name: '秘儀巧熊', subtitle: 'Mystical Artisan | 神秘工匠' },
                { name: '靜心龜象', subtitle: 'Tranquil Sage | 寧靜智者' },
                { name: '觀星智象', subtitle: 'Star Gazer | 觀星者' },
                { name: '含羞樹懶', subtitle: 'Shy Sloth | 害羞的樹懶' },
                { name: '奇想隱士鹿', subtitle: 'Whimsical Hermit | 奇想隱士' },
                { name: '星河織壩狸', subtitle: 'Cosmic Weaver | 宇宙織者' },
                { name: '靜溪靈海狸', subtitle: 'Stream Spirit | 溪流精靈' },
                { name: '靜默園丁鹿', subtitle: 'Silent Gardener | 靜默園丁' },
                { name: '書庫螢兔', subtitle: 'Library Keeper | 圖書管理員' },
                { name: '孤岩歌鳥', subtitle: 'Lone Songbird | 孤獨歌者' },
                { name: '狂想畫猴', subtitle: 'Fantasy Artist | 幻想藝術家' },
                { name: '躁衛亂雀', subtitle: 'Restless Guardian | 不安的守衛' },
                { name: '風羽智鴉', subtitle: 'Wind Sage | 風之智者' },
                { name: '百川族長熊', subtitle: 'River Chief | 河流族長' },
                { name: '領航巨熊', subtitle: 'Navigator Giant | 領航巨人' },
                { name: '壁壘築巢松鼠', subtitle: 'Fortress Builder | 堡壘建造者' },
                { name: '蒼穹巨匠鳥', subtitle: 'Sky Craftsman | 天空工匠' },
                { name: '慶典樂猴', subtitle: 'Festival Celebrant | 慶典慶祝者' },
                { name: '尋奇靈猴', subtitle: 'Wonder Seeker | 奇蹟尋求者' },
                { name: '光塵絨兔', subtitle: 'Stardust Rabbit | 星塵兔' },
                { name: '絮語風猴', subtitle: 'Whispering Wind | 細語之風' },
                { name: '磐石社鹿', subtitle: 'Rock Community | 磐石社群' },
                { name: '社群酋長鹿', subtitle: 'Community Chief | 社群酋長' },
                { name: '築巢守衛松鼠', subtitle: 'Nest Guardian | 巢穴守衛' },
                { name: '萬華晶鹿', subtitle: 'Crystal Monarch | 水晶君主' }
            ];

            // 輪播控制
            let currentSlide = 0;
            const totalSlides = 32;
            const wrapper = document.getElementById('carouselWrapper');
            const indicators = document.getElementById('indicators');
            const characterName = document.getElementById('characterName');
            const characterSubtitle = document.getElementById('characterSubtitle');
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');

            // 創建指示點
            function createIndicators() {
                for (let i = 0; i < totalSlides; i++) {
                    const indicator = document.createElement('div');
                    indicator.className = 'carousel-indicator';
                    indicator.dataset.index = i;
                    indicators.appendChild(indicator);
                }
            }

            // 更新輪播
            function updateCarousel() {
                wrapper.style.transform = `translateX(-${currentSlide * 100}%)`;
                
                // 更新指示點
                document.querySelectorAll('.carousel-indicator').forEach((indicator, index) => {
                    indicator.classList.toggle('active', index === currentSlide);
                });
                
                // 更新角色資訊
                characterName.textContent = characters[currentSlide].name;
                characterSubtitle.textContent = characters[currentSlide].subtitle;
            }

            // 前往指定slide
            function goToSlide(index) {
                currentSlide = (index + totalSlides) % totalSlides;
                updateCarousel();
            }

            // 下一張
            function nextSlide() {
                goToSlide(currentSlide + 1);
            }

            // 上一張
            function prevSlide() {
                goToSlide(currentSlide - 1);
            }

            // 事件監聽
            createIndicators();
            
            prevBtn.addEventListener('click', prevSlide);
            nextBtn.addEventListener('click', nextSlide);

            // 指示點點擊
            indicators.addEventListener('click', (e) => {
                if (e.target.classList.contains('carousel-indicator')) {
                    goToSlide(parseInt(e.target.dataset.index));
                }
            });

            // 自動播放
            let autoPlayInterval;
            function startAutoPlay() {
                autoPlayInterval = setInterval(nextSlide, 4000);
            }

            function stopAutoPlay() {
                clearInterval(autoPlayInterval);
            }

            // 滑鼠懸停暫停自動播放
            wrapper.addEventListener('mouseenter', stopAutoPlay);
            wrapper.addEventListener('mouseleave', startAutoPlay);

            // 觸控支援
            let touchStartX = 0;
            let touchEndX = 0;

            wrapper.addEventListener('touchstart', (e) => {
                touchStartX = e.changedTouches[0].screenX;
                stopAutoPlay();
            }, { passive: true });

            wrapper.addEventListener('touchend', (e) => {
                touchEndX = e.changedTouches[0].screenX;
                handleGesture();
                startAutoPlay();
            }, { passive: true });

            function handleGesture() {
                const threshold = 50;
                if (touchEndX < touchStartX - threshold) {
                    nextSlide();
                }
                if (touchEndX > touchStartX + threshold) {
                    prevSlide();
                }
            }

            // 鍵盤導航
            document.addEventListener('keydown', (e) => {
                if (e.key === 'ArrowLeft') {
                    prevSlide();
                } else if (e.key === 'ArrowRight') {
                    nextSlide();
                }
            });

            // 初始化
            updateCarousel();
            startAutoPlay();

            // 雷達圖
            const data = {
                labels: [
                    ['經驗', '開放性 (O)'],
                    ['盡責性', '(C)'],
                    ['外向性', '(E)'],
                    ['親和性', '(A)'],
                    ['情緒', '穩定性 (N)']
                ],
                datasets: [{
                    label: '人格特質分數',
                    data: [30, 75, 40, 85, 80], 
                    fill: true,
                    backgroundColor: 'rgba(74, 92, 67, 0.2)',
                    borderColor: 'rgb(74, 92, 67)',
                    pointBackgroundColor: 'rgb(74, 92, 67)',
                    pointBorderColor: '#fff',
                    pointHoverBackgroundColor: '#fff',
                    pointHoverBorderColor: 'rgb(74, 92, 67)'
                }]
            };

            const config = {
                type: 'radar',
                data: data,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    elements: { line: { borderWidth: 3 } },
                    scales: {
                        r: {
                            angleLines: { color: 'rgba(0, 0, 0, 0.1)' },
                            grid: { color: 'rgba(0, 0, 0, 0.1)' },
                            pointLabels: {
                                font: { size: 12, family: "'Inter', 'Noto Sans TC', sans-serif" },
                                color: '#374151'
                            },
                            ticks: {
                                backdropColor: 'rgba(255, 255, 255, 0.75)',
                                color: '#6b7280',
                                stepSize: 25,
                                font: { size: 10 }
                            },
                            min: 0,
                            max: 100
                        }
                    },
                    plugins: { legend: { display: false }, tooltip: { enabled: false } }
                }
            };
            
            const ctx = document.getElementById('personalityChart');
            if(ctx) { new Chart(ctx, config); }

            // 護照資訊生成
            const today = new Date();
            const dateString = `${today.getFullYear()}.${String(today.getMonth() + 1).padStart(2, '0')}.${String(today.getDate()).padStart(2, '0')}`;
            document.getElementById('entry-date').textContent = dateString;
            
            const randomNum = Math.floor(1000 + Math.random() * 9000);
            const forestId = `SB-${today.getFullYear().toString().slice(-2)}${String(today.getMonth() + 1).padStart(2, '0')}-${randomNum}`;
            document.getElementById('forest-id').textContent = forestId;

            // 分享按鈕
            const shareButton = document.getElementById('shareButton');
            const copyMessage = document.getElementById('copyMessage');
            if(shareButton && copyMessage) {
                shareButton.addEventListener('click', () => {
                    const url = window.location.href;
                    navigator.clipboard.writeText(url).then(() => {
                        copyMessage.style.opacity = '1';
                        setTimeout(() => { copyMessage.style.opacity = '0'; }, 2000);
                    }).catch(err => {
                        console.error('無法複製連結: ', err);
                        // Fallback for older browsers
                        const textArea = document.createElement("textarea");
                        textArea.value = url;
                        textArea.style.position = "fixed"; 
                        textArea.style.left = "-9999px";
                        document.body.appendChild(textArea);
                        textArea.focus();
                        textArea.select();
                        try {
                            document.execCommand('copy');
                            copyMessage.style.opacity = '1';
                            setTimeout(() => { copyMessage.style.opacity = '0'; }, 2000);
                        } catch (err) {
                            console.error('無法複製連結: ', err);
                        }
                        document.body.removeChild(textArea);
                    });
                });
            }
        });

        // 收合功能
        function toggleDetails() {
            const content = document.getElementById('detailsContent');
            const icon = document.querySelector('.toggle-icon');
            
            if (content.classList.contains('expanded')) {
                content.classList.remove('expanded');
                icon.classList.remove('rotated');
            } else {
                content.classList.add('expanded');
                icon.classList.add('rotated');
            }
        }

        // 手風琴功能
        const accordionHeaders = document.querySelectorAll('.accordion-header');
        accordionHeaders.forEach(header => {
            header.addEventListener('click', () => {
                const content = header.nextElementSibling;
                header.classList.toggle('open');
                content.classList.toggle('open');
            });
        });
    </script>
</body>
</html>
