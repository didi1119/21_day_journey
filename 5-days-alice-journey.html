<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>éœè¬æ£®æ— - äº”æ—¥ä»™å¢ƒä¹‹æ—…</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;600;700&family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body { 
            font-family: 'Noto Sans TC', sans-serif;
            background: #0a0a0a;
            color: #f5f3f0;
        }
        
        h1, h2, h3 { font-family: 'Noto Serif TC', serif; }
        
        /* æ·±åº¦é«”é©—çš„æš—è‰²ç³»è¨­è¨ˆ */
        .fade-in {
            animation: fadeIn 2s ease-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes breathing {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }
        
        @keyframes floating {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .breathing {
            animation: breathing 4s ease-in-out infinite;
        }
        
        .floating {
            animation: floating 3s ease-in-out infinite;
        }
        
        /* é»‘æš—æ¨¡å¼å¡ç‰‡ */
        .dark-card {
            background: rgba(20, 20, 20, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
        }
        
        /* ç™¼å…‰æ•ˆæœ */
        .glow {
            text-shadow: 0 0 20px rgba(200, 125, 84, 0.5);
        }
        
        .key-glow {
            box-shadow: 0 0 30px rgba(200, 125, 84, 0.3);
        }
        
        /* éŸ³é »è¦–è¦ºåŒ– */
        .audio-wave {
            height: 40px;
            display: flex;
            align-items: center;
            gap: 3px;
        }
        
        .audio-bar {
            width: 3px;
            background: #C87D54;
            animation: wave 1s ease-in-out infinite;
        }
        
        .audio-bar:nth-child(1) { animation-delay: 0s; height: 20px; }
        .audio-bar:nth-child(2) { animation-delay: 0.1s; height: 30px; }
        .audio-bar:nth-child(3) { animation-delay: 0.2s; height: 25px; }
        .audio-bar:nth-child(4) { animation-delay: 0.3s; height: 35px; }
        .audio-bar:nth-child(5) { animation-delay: 0.4s; height: 20px; }
        
        @keyframes wave {
            0%, 100% { transform: scaleY(0.5); }
            50% { transform: scaleY(1); }
        }
        
        /* æ–‡å­—æ‰“å­—æ©Ÿæ•ˆæœ */
        .typewriter {
            overflow: hidden;
            white-space: nowrap;
            animation: typing 3s steps(40, end);
        }
        
        @keyframes typing {
            from { width: 0; }
            to { width: 100%; }
        }
        
        /* è‡ªå®šç¾©æ»¾å‹•æ¢ */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.3);
        }
        
        ::-webkit-scrollbar-thumb {
            background: rgba(200, 125, 84, 0.5);
            border-radius: 4px;
        }
    </style>
</head>
<body class="min-h-screen overflow-x-hidden">
    
    <!-- é–‹å§‹ç•«é¢ -->
    <div id="startScreen" class="min-h-screen flex items-center justify-center p-4 fade-in">
        <div class="text-center max-w-2xl">
            <h1 class="text-4xl md:text-6xl font-bold mb-8 glow">éœè¬æ£®æ—</h1>
            <p class="text-xl mb-2 text-gray-400">äº”æ—¥ä»™å¢ƒä¹‹æ—…</p>
            <p class="text-sm text-gray-500 mb-12">ä¸€è¶Ÿæ·±å…¥å…§å¿ƒçš„æ„›éº—çµ²å¤¢éŠ</p>
            
            <div class="breathing text-gray-600 mb-12">
                <p>æ™‚é–“åœ¨é€™è£¡ï¼Œæ²’æœ‰æ„ç¾©ã€‚</p>
                <p>ä½ æº–å‚™å¥½ï¼Œè·Œè½äº†å—ï¼Ÿ</p>
            </div>
            
            <button onclick="startJourney()" class="bg-transparent border border-gray-600 text-gray-300 px-8 py-3 rounded-full hover:bg-white hover:bg-opacity-10 transition duration-1000">
                æ·±å‘¼å¸ï¼Œç„¶å¾Œé€²å…¥
            </button>
        </div>
    </div>

    <!-- Day 1: è·Œå…¥æ¨¹æ´ -->
    <div id="day1" class="hidden">
        <!-- å¢œè½å„€å¼ -->
        <div id="day1-falling" class="min-h-screen bg-black flex items-center justify-center">
            <div class="text-center">
                <div class="w-8 h-8 bg-white rounded-full opacity-10 mx-auto mb-8 breathing"></div>
                <p class="text-gray-500 mb-8">æˆ´ä¸Šè€³æ©Ÿï¼Œè†è½å¢œè½çš„è²éŸ³...</p>
                
                <!-- éŸ³é »è¦–è¦ºåŒ– -->
                <div class="audio-wave justify-center mb-8">
                    <div class="audio-bar"></div>
                    <div class="audio-bar"></div>
                    <div class="audio-bar"></div>
                    <div class="audio-bar"></div>
                    <div class="audio-bar"></div>
                </div>
                
                <div id="falling-text" class="text-gray-400 space-y-4 max-w-md mx-auto">
                    <p class="fade-in">ç¾åœ¨... å¯‚éœé–‹å§‹äº†...</p>
                    <p class="fade-in" style="animation-delay: 2s">æ„Ÿè¦ºä½ çš„åå­—... å®ƒåƒä¸€ä»¶ç©¿äº†å¾ˆä¹…çš„å¤–å¥—...</p>
                    <p class="fade-in" style="animation-delay: 4s">å¾ä½ çš„è‚©è†€è¼•è¼•æ»‘è½...</p>
                    <p class="fade-in" style="animation-delay: 6s">ä½ çš„ç…©æƒ±... ä½ çš„è¨ˆç•«... éƒ½åŒ–ä½œç´°å°çš„å¡µåŸƒ...</p>
                    <p class="fade-in" style="animation-delay: 8s">å‰©ä¸‹çš„... åªæœ‰ä½ çš„å‘¼å¸...</p>
                </div>
                
                <button onclick="day1Land()" class="mt-12 text-gray-600 border border-gray-800 px-6 py-2 rounded-full hover:border-gray-600 transition opacity-0 fade-in" style="animation-delay: 10s">
                    è‘—é™¸
                </button>
            </div>
        </div>

        <!-- æ—ä¸­é†’ä¾† -->
        <div id="day1-forest" class="hidden min-h-screen p-4">
            <div class="max-w-3xl mx-auto py-12">
                <div class="dark-card rounded-2xl p-8 md:p-12">
                    <p class="text-gray-400 mb-6">ä½ å®‰å…¨æŠµé”äº†ã€‚</p>
                    <p class="text-xl mb-8">é€™è£¡æ˜¯ä½ çš„éœè¬æ£®æ—ï¼Œä¸€å€‹æ™‚é–“å‡çµä¹‹åœ°ã€‚</p>
                    
                    <div class="border-l-2 border-gray-700 pl-6 mb-8">
                        <p class="mb-4">åœ¨é€™è£¡ï¼Œæˆ‘å€‘ä¸ç”¨çœ¼ç›ã€çœ‹ã€ï¼Œè€Œæ˜¯ç”¨æ•´å€‹ç”Ÿå‘½å»ã€å‡è¦–ã€ã€‚</p>
                        <p class="mb-4">ä½ çš„ç¬¬ä¸€å€‹ä»»å‹™ï¼Œå·²ç¶“åœ¨ä½ èº«é‚Šç­‰å¾…ã€‚</p>
                        <p class="text-gray-400">è«‹åœ¨ä½ çš„ä¸–ç•Œè£¡ï¼Œå°‹æ‰¾ä¸€å€‹ä¾†è‡ªè‡ªç„¶çš„ã€å¾®å°å­˜åœ¨ã€ã€‚</p>
                        <p class="text-gray-400">ä¸€ç‰‡è‘‰å­ã€ä¸€é¡†çŸ³é ­ã€ä¸€æ ¹ç¾½æ¯›ã€ä¸€æœµä¹¾æ¯çš„èŠ±ç“£...</p>
                    </div>
                    
                    <button onclick="day1Found()" class="border border-gray-600 text-gray-300 px-6 py-3 rounded-full hover:bg-white hover:bg-opacity-10 transition">
                        æˆ‘æ‰¾åˆ°äº†ï¼Œå®ƒå°±åœ¨é€™è£¡
                    </button>
                </div>
            </div>
        </div>

        <!-- å‡è¦–èˆ‡æ•ç² -->
        <div id="day1-gaze" class="hidden min-h-screen p-4">
            <div class="max-w-3xl mx-auto py-12">
                <div class="dark-card rounded-2xl p-8 md:p-12">
                    <h3 class="text-2xl font-serif mb-6">å‡è¦–çš„å„€å¼</h3>
                    
                    <div class="space-y-4 text-gray-400 mb-8">
                        <p>ç¾åœ¨ï¼Œå°‡ä½ æ‰€æœ‰çš„æ³¨æ„åŠ›ï¼Œéƒ½çµ¦äºˆé€™å€‹å¾®å°çš„ç”Ÿå‘½ã€‚</p>
                        <p>æ¥ä¸‹ä¾†çš„ 15 åˆ†é˜ï¼Œåªå±¬æ–¼ä½ å’Œå®ƒã€‚</p>
                        
                        <div class="pl-6 space-y-2 text-sm">
                            <p>â€¢ ç”¨æŒ‡å°–ï¼Œæ„Ÿå—å®ƒåƒè¬å¹´æ¼”åŒ–è€Œä¾†çš„ç´‹ç†</p>
                            <p>â€¢ å°‡å®ƒæ¹Šè¿‘è€³é‚Šï¼Œåœ¨å¯‚éœä¸­ï¼Œè½è½å®ƒæ˜¯å¦æœ‰è²éŸ³</p>
                            <p>â€¢ æ·±å‘¼å¸ï¼Œèä¸€èå®ƒèº«ä¸Šï¼Œå±¬æ–¼å¤ªé™½ã€æ³¥åœŸæˆ–é›¨æ°´çš„æ°£å‘³</p>
                            <p>â€¢ è½‰å‹•å®ƒï¼Œè§€å¯Ÿå…‰ç·šå¦‚ä½•åœ¨å®ƒçš„ç¨œè§’èˆ‡å¼§åº¦ä¹‹é–“æµè½‰</p>
                        </div>
                    </div>
                    
                    <div class="border border-gray-700 border-dashed rounded-xl p-8 mb-6 text-center">
                        <svg class="w-16 h-16 mx-auto mb-4 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                        </svg>
                        <p class="text-gray-500 mb-4">ç‚ºå®ƒæ‹ä¸‹ä¸€å¼µç‰¹å¯«ç…§ç‰‡</p>
                        <input type="file" id="day1Photo" accept="image/*" class="hidden" onchange="day1PhotoUploaded(event)">
                        <label for="day1Photo" class="cursor-pointer text-gray-400 border border-gray-700 px-4 py-2 rounded-full hover:bg-white hover:bg-opacity-5 transition">
                            é»æ­¤ä¸Šå‚³éˆé­‚çš„è‚–åƒ
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <!-- é‘„é€ é‘°åŒ™ -->
        <div id="day1-key" class="hidden min-h-screen p-4">
            <div class="max-w-3xl mx-auto py-12">
                <div class="dark-card rounded-2xl p-8 md:p-12">
                    <div id="uploadedPhotoContainer" class="mb-8"></div>
                    
                    <p class="text-gray-400 mb-4">ä½ åšå¾—å¾ˆå¥½ã€‚ä½ æ²’æœ‰ã€çœ‹ã€å®ƒï¼Œä½ ã€è¦‹åˆ°ã€äº†å®ƒã€‚</p>
                    <p class="mb-6">çœ‹è‘—é€™å¼µç…§ç‰‡ï¼Œå†æ¬¡æ„Ÿå—ä½ èˆ‡å®ƒçš„é€£çµã€‚</p>
                    
                    <div class="border-l-2 border-orange-800 pl-6 mb-8">
                        <p class="mb-4">ç¾åœ¨ï¼Œæœ€é‡è¦çš„ä¸€æ­¥ä¾†äº†ã€‚</p>
                        <p class="mb-4">å¦‚æœé€™å€‹å¾®å°çš„å­˜åœ¨ï¼Œå®ƒçš„æ•´å€‹ç”Ÿå‘½ã€å®ƒçš„æ•…äº‹ã€å®ƒçµ¦ä½ çš„æ„Ÿè¦ºï¼Œ</p>
                        <p class="mb-4">åªèƒ½æ¿ƒç¸®æˆ<span class="text-orange-400 font-bold">ã€ä¸€å€‹è©ã€</span>ä¾†å‘½åå®ƒçš„æœ¬è³ª...</p>
                        <p class="text-xl">é‚£å€‹è©ï¼Œæœƒæ˜¯ä»€éº¼ï¼Ÿ</p>
                    </div>
                    
                    <div class="mb-6">
                        <input type="text" id="keyWord" placeholder="è¼¸å…¥é‚£å€‹è©..." 
                               class="w-full bg-transparent border-b border-gray-600 py-3 text-center text-xl focus:outline-none focus:border-orange-400 transition">
                    </div>
                    
                    <button onclick="forgeKey()" class="w-full bg-gradient-to-r from-orange-900 to-orange-800 text-white py-3 rounded-full hover:from-orange-800 hover:to-orange-700 transition key-glow">
                        é‘„é€ é‘°åŒ™
                    </button>
                </div>
            </div>
        </div>

        <!-- é–‹å•Ÿå…§åœ¨ä¹‹é–€ -->
        <div id="day1-door" class="hidden min-h-screen p-4">
            <div class="max-w-3xl mx-auto py-12">
                <div class="dark-card rounded-2xl p-8 md:p-12">
                    <div class="text-center mb-8">
                        <div class="text-6xl mb-4 floating">ğŸ—ï¸</div>
                        <p class="text-xl text-orange-400" id="keyDisplay"></p>
                    </div>
                    
                    <div class="space-y-4 text-gray-400 mb-8">
                        <p>é‘°åŒ™ï¼Œè½‰å‹•äº†ã€‚</p>
                        <p>é–€ï¼Œé–‹äº†ä¸€æ¢ç¸«ã€‚</p>
                        <p>é€™æŠŠé‘°åŒ™æ‰€é–‹å•Ÿçš„ï¼Œæ˜¯ä½ å…§å¿ƒä¸€åº§å¡µå°å·²ä¹…çš„æˆ¿é–“ã€‚</p>
                        <p>åœ¨ä½ çœ‹è¦‹æˆ¿é–“å…¨è²Œä¹‹å‰...</p>
                        <p>ä½ å…ˆèåˆ°äº†ä¸€è‚¡æ°£å‘³... æˆ–è½åˆ°äº†ä¸€æ®µæ—‹å¾‹... æˆ–æ„Ÿè¦ºåˆ°äº†ä¸€ç¨®æº«åº¦...</p>
                    </div>
                    
                    <div class="mb-6">
                        <label class="text-gray-500 text-sm">é‚£æ˜¯ä»€éº¼è¢«éºå¿˜çš„æ„Ÿè¦ºï¼Ÿæ˜¯å“ªå€‹è¢«æ·±è—çš„è¨˜æ†¶çš„ç‰‡æ®µï¼Ÿ</label>
                        <textarea id="day1Memory" rows="4" placeholder="è®“ç­”æ¡ˆè‡ªå·±æµæ·Œå‡ºä¾†..." 
                                  class="w-full bg-transparent border border-gray-700 rounded-lg p-4 mt-2 focus:outline-none focus:border-orange-400 transition"></textarea>
                    </div>
                    
                    <button onclick="completeDay1()" class="w-full border border-gray-600 text-gray-300 py-3 rounded-full hover:bg-white hover:bg-opacity-10 transition">
                        å®Œæˆç¬¬ä¸€å¤©
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Day 2: é‡è¦‹æ¯›æ¯›èŸ² -->
    <div id="day2" class="hidden">
        <!-- æ™¨å…‰ä¸­çš„å€’å½± -->
        <div id="day2-reflection" class="min-h-screen p-4">
            <div class="max-w-3xl mx-auto py-12">
                <div class="dark-card rounded-2xl p-8 md:p-12">
                    <p class="text-gray-400 mb-4">æ£®æ—åœ¨ä½ æ²‰ç¡æ™‚ï¼Œä¸‹äº†ä¸€å¤œçš„é›¨ã€‚</p>
                    <p class="mb-6">ä½ æ˜¨å¤©é‘„é€ çš„é‘°åŒ™ï¼Œ<span class="text-orange-400" id="day2KeyReminder"></span>ï¼Œåœ¨ä½ æ‰‹ä¸­ä¾ç„¶æº«ç†±ã€‚</p>
                    
                    <div class="text-center my-12">
                        <div class="text-8xl mb-6">ğŸ›</div>
                        <p class="text-gray-500 mb-2">åœ¨æ—é–“ç©ºåœ°çš„ä¸€ç‰‡æ°´çªªæ—ï¼Œ</p>
                        <p class="text-gray-500 mb-4">ä½ çœ‹åˆ°ä¸€éš»æ­£åœ¨åé›²åéœ§çš„æ¯›æ¯›èŸ²ã€‚</p>
                        <p class="text-2xl font-serif">ã€Œä½ ï¼Œæ˜¯èª°ï¼Ÿã€</p>
                    </div>
                    
                    <button onclick="day2Mirror()" class="w-full border border-gray-600 text-gray-300 py-3 rounded-full hover:bg-white hover:bg-opacity-10 transition">
                        å›æ‡‰ç¥‚çš„æå•
                    </button>
                </div>
            </div>
        </div>

        <!-- é¡åƒæ›¸å¯« -->
        <div id="day2-writing" class="hidden min-h-screen p-4">
            <div class="max-w-3xl mx-auto py-12">
                <div class="dark-card rounded-2xl p-8 md:p-12">
                    <h3 class="text-2xl font-serif mb-6">æˆ‘æ˜¯...</h3>
                    
                    <div class="text-gray-400 mb-8">
                        <p class="mb-2">è¦å‰‡å¾ˆç°¡å–®ï¼š</p>
                        <ul class="space-y-1 text-sm pl-6">
                            <li>â€¢ ä¸è¦åœé “</li>
                            <li>â€¢ ä¸è¦æ€è€ƒ</li>
                            <li>â€¢ ä¸è¦è©•åˆ¤</li>
                            <li>â€¢ å¯«ä¸‹æ‰€æœ‰æµ®ç¾çš„ç­”æ¡ˆ</li>
                        </ul>
                    </div>
                    
                    <div id="iAmList" class="space-y-2 mb-8">
                        <input type="text" placeholder="æˆ‘æ˜¯..." class="w-full bg-transparent border-b border-gray-700 py-2 focus:outline-none focus:border-orange-400" onkeypress="addIAm(event)">
                    </div>
                    
                    <button onclick="day2Sort()" class="w-full border border-gray-600 text-gray-300 py-3 rounded-full hover:bg-white hover:bg-opacity-10 transition">
                        æˆ‘å¯«å®Œäº†ï¼Œé€™æ˜¯æˆ‘æ‰€æœ‰çš„ç­”æ¡ˆ
                    </button>
                </div>
            </div>
        </div>

        <!-- åˆ†æ€çµ²ç·š -->
        <div id="day2-threads" class="hidden min-h-screen p-4">
            <div class="max-w-4xl mx-auto py-12">
                <div class="dark-card rounded-2xl p-8 md:p-12">
                    <p class="text-center text-gray-400 mb-8">æ¯›æ¯›èŸ²å¾å£ä¸­ï¼Œåå‡ºå…©æ ¹ä¸åŒé¡è‰²çš„çµ²ç·šã€‚</p>
                    
                    <div class="grid md:grid-cols-2 gap-8">
                        <!-- é‡‘è‰²çµ²ç·š -->
                        <div class="border border-yellow-900 rounded-xl p-6">
                            <h4 class="text-yellow-600 font-serif text-xl mb-2">é‡‘è‰²çš„çµ²ç·š</h4>
                            <p class="text-gray-500 text-sm mb-4">é€™æ˜¯ä¸–ç•Œã€Œçµ¦ã€ä½ çš„</p>
                            <div id="goldThreads" class="space-y-2 min-h-[200px]"></div>
                        </div>
                        
                        <!-- éŠ€è‰²çµ²ç·š -->
                        <div class="border border-gray-600 rounded-xl p-6">
                            <h4 class="text-gray-400 font-serif text-xl mb-2">éŠ€è‰²çš„çµ²ç·š</h4>
                            <p class="text-gray-500 text-sm mb-4">é€™æ˜¯æˆ‘èˆ‡ç”Ÿã€Œä¿±ã€ä¾†çš„</p>
                            <div id="silverThreads" class="space-y-2 min-h-[200px]"></div>
                        </div>
                    </div>
                    
                    <button onclick="day2Record()" class="w-full mt-8 border border-gray-600 text-gray-300 py-3 rounded-full hover:bg-white hover:bg-opacity-10 transition">
                        æˆ‘å·²åˆ†æ€å®Œæˆ
                    </button>
                </div>
            </div>
        </div>

        <!-- æ•ç²é »ç‡ -->
        <div id="day2-frequency" class="hidden min-h-screen p-4">
            <div class="max-w-3xl mx-auto py-12">
                <div class="dark-card rounded-2xl p-8 md:p-12">
                    <p class="text-gray-400 mb-6">æ¯›æ¯›èŸ²å†æ¬¡å‡è¦–è‘—ä½ ï¼šã€Œæ–‡å­—ï¼Œæ˜¯å¤–è¡£ã€‚ä½†ä½ çœŸå¯¦çš„è²éŸ³ï¼Œæ˜¯ä»€éº¼ï¼Ÿã€</p>
                    
                    <div class="space-y-4 text-gray-500 mb-8">
                        <p>è«‹æ”¾ä¸‹æ‰‹æ©Ÿï¼Œæ‰¾ä¸€å€‹å®‰éœçš„ç©ºé–“ã€‚</p>
                        <p>é–‰ä¸Šçœ¼ç›ï¼Œå°‡æ³¨æ„åŠ›å¸¶å›ä½ çš„èº«é«”ã€‚</p>
                        <p>è®“ä½ å…§åœ¨æœ€æ·±è™•çš„é‚£å€‹ã€ä½ ã€ï¼Œç™¼å‡ºä¸€è²æœ€èª å¯¦çš„å˜†æ¯ã€è¼•å“¼æˆ–éŸ³ç¯€ã€‚</p>
                    </div>
                    
                    <div class="text-center">
                        <button id="recordBtn" onclick="toggleRecording()" class="w-32 h-32 rounded-full border-2 border-red-800 text-red-400 hover:bg-red-900 hover:bg-opacity-20 transition">
                            <svg class="w-12 h-12 mx-auto" fill="currentColor" viewBox="0 0 24 24">
                                <circle cx="12" cy="12" r="8"/>
                            </svg>
                            <p class="text-sm mt-2">æŒ‰ä½éŒ„éŸ³</p>
                        </button>
                    </div>
                    
                    <button onclick="completeDay2()" class="w-full mt-8 border border-gray-600 text-gray-300 py-3 rounded-full hover:bg-white hover:bg-opacity-10 transition">
                        å®Œæˆç¬¬äºŒå¤©
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Day 3: ç˜‹å¸½åŒ çš„èŒ¶æœƒ -->
    <div id="day3" class="hidden">
        <!-- èŒ¶æœƒé‚€è«‹ -->
        <div id="day3-invitation" class="min-h-screen p-4">
            <div class="max-w-3xl mx-auto py-12">
                <div class="dark-card rounded-2xl p-8 md:p-12">
                    <div class="text-center mb-8">
                        <p class="text-gray-400 mb-4">æ£®æ—çš„æ·±è™•ï¼Œæœ‰äº›ä¸ä¸€æ¨£äº†ã€‚</p>
                        <p class="text-xl mb-6">æ­¡è¿ä¾†åˆ°ç˜‹å¸½åŒ çš„èŒ¶æœƒã€‚</p>
                        <div class="text-6xl mb-6">ğŸ«– â˜• ğŸ©</div>
                    </div>
                    
                    <div class="space-y-6 mb-8">
                        <div class="border-l-2 border-gray-700 pl-6">
                            <h4 class="text-orange-400 mb-2">ã€ç™»å±±è€…ã€‘</h4>
                            <p class="text-gray-500 text-sm">æ°¸é æœ›è‘—æ›´é«˜å±±å³°ã€å …éŸŒã€å‹™å¯¦çš„ä½ </p>
                        </div>
                        <div class="border-l-2 border-gray-700 pl-6">
                            <h4 class="text-green-400 mb-2">ã€ç‰§ç¥ã€‘</h4>
                            <p class="text-gray-500 text-sm">æ¸´æœ›èµ¤è…³å¥”è·‘ã€äº«å—ç´”ç²¹å–œæ‚…çš„ä½ </p>
                        </div>
                        <div class="border-l-2 border-gray-700 pl-6">
                            <h4 class="text-blue-400 mb-2">ã€å®ˆæœ›è€…ã€‘</h4>
                            <p class="text-gray-500 text-sm">åœ¨éœè¬ä¸­æ·±åˆ»æ„Ÿå—ä¸€åˆ‡çš„ä½ </p>
                        </div>
                    </div>
                    
                    <button onclick="day3Gifts()" class="w-full border border-gray-600 text-gray-300 py-3 rounded-full hover:bg-white hover:bg-opacity-10 transition">
                        æˆ‘çš„å®¢äººå€‘ï¼Œå·²å…¨éƒ¨å…¥åº§
                    </button>
                </div>
            </div>
        </div>

        <!-- ç¦®ç‰©äº¤æ› -->
        <div id="day3-gifts" class="hidden min-h-screen p-4">
            <div class="max-w-3xl mx-auto py-12">
                <div class="dark-card rounded-2xl p-8 md:p-12">
                    <h3 class="text-2xl font-serif mb-6">ç¦®ç‰©äº¤æ›å„€å¼</h3>
                    
                    <div class="space-y-4 text-gray-400 mb-8">
                        <p>ç˜‹å¸½åŒ çš„èŒ¶æœƒï¼Œæœ‰ä¸€å€‹å¥‡æ€ªçš„è¦çŸ©ï¼š</p>
                        <p>ä¸èŠç©ºè©±ï¼Œåªäº¤æ›ç¦®ç‰©ã€‚</p>
                        
                        <div class="bg-gray-900 rounded-lg p-4 space-y-2 text-sm">
                            <p>â€¢ ã€ç™»å±±è€…ã€‘è¦é€ä¸€ä»½ç¦®ç‰©çµ¦ã€ç‰§ç¥ã€‘</p>
                            <p>â€¢ ã€ç‰§ç¥ã€‘è¦é€ä¸€ä»½ç¦®ç‰©çµ¦ã€å®ˆæœ›è€…ã€‘</p>
                            <p>â€¢ ã€å®ˆæœ›è€…ã€‘è¦é€ä¸€ä»½ç¦®ç‰©çµ¦ã€ç™»å±±è€…ã€‘</p>
                        </div>
                        
                        <p class="text-gray-500">è«‹åœ¨æˆ¿é–“è£¡æ‰¾ä¸‰æ¨£çœŸå¯¦çš„ç‰©å“ï¼Œæ“ºæ”¾å¥½ä¸¦æ‹ç…§ã€‚</p>
                    </div>
                    
                    <div class="border border-gray-700 border-dashed rounded-xl p-8 mb-6 text-center">
                        <input type="file" id="day3Photo" accept="image/*" class="hidden" onchange="day3PhotoUploaded(event)">
                        <label for="day3Photo" class="cursor-pointer text-gray-400 border border-gray-700 px-4 py-2 rounded-full hover:bg-white hover:bg-opacity-5 transition">
                            ä¸Šå‚³æˆ‘çš„èŒ¶æœƒåˆç…§
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <!-- ç„¡è²å°è©± -->
        <div id="day3-dialogue" class="hidden min-h-screen p-4">
            <div class="max-w-3xl mx-auto py-12">
                <div class="dark-card rounded-2xl p-8 md:p-12">
                    <div id="day3PhotoContainer" class="mb-8"></div>
                    
                    <h3 class="text-2xl font-serif mb-6">ç„¡è²çš„å°è©±</h3>
                    
                    <div class="space-y-6">
                        <div>
                            <label class="text-orange-400 text-sm">ç™»å±±è€…é€å‡ºç¦®ç‰©æ™‚ï¼Œæƒ³å°ç‰§ç¥èªªï¼š</label>
                            <input type="text" id="day3msg1" class="w-full bg-transparent border-b border-gray-700 py-2 mt-2 focus:outline-none focus:border-orange-400">
                        </div>
                        <div>
                            <label class="text-green-400 text-sm">ç‰§ç¥é€å‡ºç¦®ç‰©æ™‚ï¼Œæƒ³å°å®ˆæœ›è€…èªªï¼š</label>
                            <input type="text" id="day3msg2" class="w-full bg-transparent border-b border-gray-700 py-2 mt-2 focus:outline-none focus:border-green-400">
                        </div>
                        <div>
                            <label class="text-blue-400 text-sm">å®ˆæœ›è€…é€å‡ºç¦®ç‰©æ™‚ï¼Œæƒ³å°ç™»å±±è€…èªªï¼š</label>
                            <input type="text" id="day3msg3" class="w-full bg-transparent border-b border-gray-700 py-2 mt-2 focus:outline-none focus:border-blue-400">
                        </div>
                    </div>
                    
                    <button onclick="day3KeyGiving()" class="w-full mt-8 border border-gray-600 text-gray-300 py-3 rounded-full hover:bg-white hover:bg-opacity-10 transition">
                        å®Œæˆå°è©±ç¿»è­¯
                    </button>
                </div>
            </div>
        </div>

        <!-- é‘°åŒ™æ­¸å®¿ -->
        <div id="day3-keygiving" class="hidden min-h-screen p-4">
            <div class="max-w-3xl mx-auto py-12">
                <div class="dark-card rounded-2xl p-8 md:p-12">
                    <div class="text-center mb-8">
                        <div class="text-6xl mb-4 floating">ğŸ—ï¸</div>
                        <p class="text-xl text-orange-400" id="day3KeyDisplay"></p>
                    </div>
                    
                    <p class="text-gray-400 mb-6">é€™æŠŠé‘°åŒ™æ‰€ä»£è¡¨çš„åŠ›é‡ï¼Œæ­¤åˆ»ï¼Œä»–å€‘ä¸‰äººä¸­ï¼Œèª°æœ€éœ€è¦å®ƒï¼Ÿ</p>
                    
                    <div class="grid grid-cols-3 gap-4 mb-8">
                        <button onclick="giveKeyTo('ç™»å±±è€…')" class="p-4 border border-gray-700 rounded-lg hover:bg-orange-900 hover:bg-opacity-20 transition">
                            <div class="text-3xl mb-2">â›°ï¸</div>
                            <p class="text-sm">ç™»å±±è€…</p>
                        </button>
                        <button onclick="giveKeyTo('ç‰§ç¥')" class="p-4 border border-gray-700 rounded-lg hover:bg-green-900 hover:bg-opacity-20 transition">
                            <div class="text-3xl mb-2">ğŸŒ¿</div>
                            <p class="text-sm">ç‰§ç¥</p>
                        </button>
                        <button onclick="giveKeyTo('å®ˆæœ›è€…')" class="p-4 border border-gray-700 rounded-lg hover:bg-blue-900 hover:bg-opacity-20 transition">
                            <div class="text-3xl mb-2">ğŸ‘ï¸</div>
                            <p class="text-sm">å®ˆæœ›è€…</p>
                        </button>
                    </div>
                    
                    <div id="keyGivingReason" class="hidden">
                        <label class="text-gray-500 text-sm">ç•¶ä½ æŠŠé‘°åŒ™äº¤çµ¦ç¥‚ï¼Œç¥‚çš„ç”Ÿå‘½æœƒç™¼ç”Ÿä»€éº¼æ”¹è®Šï¼Ÿ</label>
                        <textarea id="day3Change" rows="3" class="w-full bg-transparent border border-gray-700 rounded-lg p-4 mt-2 focus:outline-none focus:border-orange-400"></textarea>
                        
                        <button onclick="completeDay3()" class="w-full mt-4 border border-gray-600 text-gray-300 py-3 rounded-full hover:bg-white hover:bg-opacity-10 transition">
                            å®Œæˆç¬¬ä¸‰å¤©
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Day 4: ç´…å¿ƒçš‡åçš„èŠ±åœ’ -->
    <div id="day4" class="hidden">
        <!-- å®Œç¾èŠ±åœ’ -->
        <div id="day4-garden" class="min-h-screen p-4">
            <div class="max-w-3xl mx-auto py-12">
                <div class="dark-card rounded-2xl p-8 md:p-12">
                    <div class="text-center mb-8">
                        <div class="text-6xl mb-4">â™ ï¸ â™¥ï¸ â™£ï¸ â™¦ï¸</div>
                        <p class="text-xl mb-2">ç´…å¿ƒçš‡åçš„ç«ç‘°èŠ±åœ’</p>
                        <p class="text-gray-500">é€™è£¡çš„ä¸€åˆ‡ï¼Œéƒ½å®Œç¾å¾—ä»¤äººçª’æ¯</p>
                    </div>
                    
                    <p class="text-gray-400 mb-6">çš‡åçš„è²éŸ³åœ¨ä½ è…¦ä¸­éŸ¿èµ·ï¼šã€ŒOff with their heads!ã€</p>
                    
                    <div class="space-y-4 mb-8">
                        <p>è«‹å¯«ä¸‹ä¸‰æ¢ä½ å…§å¿ƒã€Œç´…å¿ƒçš‡åã€é ’å¸ƒçš„çµ•å°æ³•å‰‡ï¼š</p>
                        <input type="text" id="law1" placeholder="æ³•å‰‡ä¸€..." class="w-full bg-transparent border-b border-red-900 py-2 focus:outline-none">
                        <input type="text" id="law2" placeholder="æ³•å‰‡äºŒ..." class="w-full bg-transparent border-b border-red-900 py-2 focus:outline-none">
                        <input type="text" id="law3" placeholder="æ³•å‰‡ä¸‰..." class="w-full bg-transparent border-b border-red-900 py-2 focus:outline-none">
                    </div>
                    
                    <button onclick="day4BodyMap()" class="w-full border border-gray-600 text-gray-300 py-3 rounded-full hover:bg-white hover:bg-opacity-10 transition">
                        é€™å°±æ˜¯æˆ‘çš„ä¸‰æ¢æ³•å‰‡
                    </button>
                </div>
            </div>
        </div>

        <!-- èº«é«”ç‰¢ç±  -->
        <div id="day4-body" class="hidden min-h-screen p-4">
            <div class="max-w-3xl mx-auto py-12">
                <div class="dark-card rounded-2xl p-8 md:p-12">
                    <h3 class="text-2xl font-serif mb-6">èº«é«”çš„ç‰¢ç± </h3>
                    
                    <p class="text-gray-400 mb-8">é»˜å¿µæ¯æ¢æ³•å‰‡ï¼Œæ„Ÿå—å®ƒåœ¨ä½ èº«é«”çš„å“ªå€‹éƒ¨ä½è£½é€ äº†ç·Šç¸®ï¼š</p>
                    
                    <div class="space-y-6" id="lawsWithBody"></div>
                    
                    <button onclick="day4Release()" class="w-full mt-8 border border-gray-600 text-gray-300 py-3 rounded-full hover:bg-white hover:bg-opacity-10 transition">
                        æˆ‘å·²æ¨™è¨˜å‡ºæ·é–çš„ä½ç½®
                    </button>
                </div>
            </div>
        </div>

        <!-- é‡‹æ”¾å„€å¼ -->
        <div id="day4-release" class="hidden min-h-screen p-4">
            <div class="max-w-3xl mx-auto py-12">
                <div class="dark-card rounded-2xl p-8 md:p-12">
                    <h3 class="text-2xl font-serif mb-6">èº«é«”çš„é©å‘½</h3>
                    
                    <div class="space-y-4 text-gray-400 mb-8">
                        <p>ç¾åœ¨ï¼Œæˆ‘å€‘è¦ç™¼èµ·ä¸€å ´èº«é«”çš„é©å‘½ã€‚</p>
                        <p>è«‹æ‰¾ä¸€å€‹çµ•å°ç§å¯†ã€å®‰å…¨çš„ç©ºé–“ã€‚</p>
                        
                        <div class="bg-gray-900 rounded-lg p-4 space-y-2 text-sm">
                            <p>ä½ å¯ä»¥ï¼š</p>
                            <p>â€¢ ç”¨åŠ›æ¶æ‰“æ•é ­ï¼Œé‡‹æ”¾å£“åŠ›</p>
                            <p>â€¢ åšç„¡è²çš„å¶å–Šï¼Œç¹ƒç·Šå¾Œæ”¾é¬†</p>
                            <p>â€¢ æº«æŸ”æ“æŠ±ç·Šç¸®çš„éƒ¨ä½ï¼Œå…è¨±é¡«æŠ–</p>
                        </div>
                    </div>
                    
                    <button onclick="day4Rewrite()" class="w-full border border-gray-600 text-gray-300 py-3 rounded-full hover:bg-white hover:bg-opacity-10 transition">
                        æˆ‘å·²å®Œæˆé‡‹æ”¾
                    </button>
                </div>
            </div>
        </div>

        <!-- é‡å¯«æ³•å‰‡ -->
        <div id="day4-rewrite" class="hidden min-h-screen p-4">
            <div class="max-w-3xl mx-auto py-12">
                <div class="dark-card rounded-2xl p-8 md:p-12">
                    <p class="text-gray-400 mb-6">é‹ç”¨èŒ¶æœƒæœ‹å‹å€‘çš„åŠ›é‡ï¼Œæ”¹å¯«ä½ çš„èˆŠæ³•å‰‡ï¼š</p>
                    
                    <div class="space-y-6" id="lawsRewrite"></div>
                    
                    <button onclick="completeDay4()" class="w-full mt-8 bg-gradient-to-r from-red-900 to-orange-900 text-white py-3 rounded-full hover:from-red-800 hover:to-orange-800 transition">
                        å®Œæˆæ”¹å¯«ï¼Œè§£é™¤é­”å’’
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Day 5: é†’ä¾† -->
    <div id="day5" class="hidden">
        <!-- èŠ±åœ’é†’ä¾† -->
        <div id="day5-awake" class="min-h-screen p-4">
            <div class="max-w-3xl mx-auto py-12">
                <div class="dark-card rounded-2xl p-8 md:p-12">
                    <div class="text-center mb-8">
                        <p class="text-gray-400 mb-4">æ˜¨å¤œçš„é›¨ï¼Œæ´—æ·¨äº†æ•´å€‹ä¸–ç•Œã€‚</p>
                        <p class="text-xl mb-2">ä½ çœé–‹çœ¼ç›ï¼Œç™¼ç¾è‡ªå·±æ­£èººåœ¨è‡ªå·±çš„èŠ±åœ’è£¡ã€‚</p>
                        <p class="text-gray-500">é€™è£¡ï¼Œåªå‰©ä¸‹å¯§éœï¼Œå’Œä½ è‡ªå·±ã€‚</p>
                    </div>
                    
                    <div class="border-l-2 border-gray-700 pl-6 mb-8">
                        <p class="mb-4">è«‹ä½ æš«æ™‚é›¢é–‹è¢å¹•ã€‚</p>
                        <p class="mb-4">èµ°åˆ°çª—é‚Šï¼Œæˆ–è¸å‡ºå®¶é–€ã€‚</p>
                        <p class="mb-4">ç”¨é€™å››å¤©è¢«å–šé†’çš„æ‰€æœ‰æ„Ÿå®˜...</p>
                        <p>å»ã€ç¬¬ä¸€æ¬¡ã€çœ‹è¦‹ä¸€ä»¶ä½ æ—©å·²ç¿’ä»¥ç‚ºå¸¸çš„äº‹ç‰©ã€‚</p>
                    </div>
                    
                    <div class="border border-gray-700 border-dashed rounded-xl p-8 text-center">
                        <input type="file" id="day5Photo" accept="image/*" class="hidden" onchange="day5PhotoUploaded(event)">
                        <label for="day5Photo" class="cursor-pointer text-gray-400 border border-gray-700 px-4 py-2 rounded-full hover:bg-white hover:bg-opacity-5 transition">
                            æˆ‘çœ‹è¦‹äº†ï¼Œä¸¦å·²æ‹ä¸‹é†’ä¾†çš„è­‰æ˜
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <!-- æ„›éº—çµ²åœ°åœ– -->
        <div id="day5-map" class="hidden min-h-screen p-4">
            <div class="max-w-4xl mx-auto py-12">
                <div class="dark-card rounded-2xl p-8 md:p-12">
                    <h2 class="text-3xl font-serif text-center mb-8">ä½ çš„æ„›éº—çµ²åœ°åœ–</h2>
                    
                    <div class="space-y-6" id="aliceMap"></div>
                    
                    <button onclick="day5Letter()" class="w-full mt-8 border border-gray-600 text-gray-300 py-3 rounded-full hover:bg-white hover:bg-opacity-10 transition">
                        æª¢è¦–å®Œæ•´åœ°åœ–
                    </button>
                </div>
            </div>
        </div>

        <!-- æ™‚ç©ºä¿¡ -->
        <div id="day5-letter" class="hidden min-h-screen p-4">
            <div class="max-w-3xl mx-auto py-12">
                <div class="dark-card rounded-2xl p-8 md:p-12">
                    <h3 class="text-2xl font-serif mb-6">çµ¦æœªä¾†è‡ªå·±çš„æ™‚ç©ºä¿¡</h3>
                    
                    <div class="mb-8">
                        <p class="text-gray-400 mb-4">ç‚ºä¸€å€‹æœˆå¾Œçš„è‡ªå·±ï¼Œå¯«ä¸€å°ç°¡çŸ­çš„ä¿¡ï¼š</p>
                        <textarea id="futureLetter" rows="6" placeholder="è¦ªæ„›çš„è‡ªå·±..." 
                                  class="w-full bg-transparent border border-gray-700 rounded-lg p-4 focus:outline-none focus:border-orange-400"></textarea>
                    </div>
                    
                    <button onclick="completeJourney()" class="w-full bg-gradient-to-r from-gray-800 to-gray-700 text-white py-3 rounded-full hover:from-gray-700 hover:to-gray-600 transition">
                        å°å­˜é€™å°æ™‚ç©ºä¿¡ï¼Œå¯„å¾€æœªä¾†
                    </button>
                </div>
            </div>
        </div>

        <!-- çµæŸç•«é¢ -->
        <div id="day5-end" class="hidden min-h-screen flex items-center justify-center p-4">
            <div class="text-center max-w-2xl fade-in">
                <p class="text-gray-400 mb-4">è¦ªæ„›çš„æ—…äººï¼Œæˆ‘å€‘çš„æ—…ç¨‹ï¼Œåˆ°æ­¤çµæŸäº†ã€‚</p>
                <p class="text-xl mb-8">ä½†ä½ çš„æ—…ç¨‹ï¼Œæ‰æ­£è¦é–‹å§‹ã€‚</p>
                
                <div class="my-12">
                    <p class="text-gray-500 mb-4">æ¯›æ¯›èŸ²æœ€å¾Œçš„æå•ï¼Œä¸æ˜¯ã€Œä½ æ˜¯èª°ï¼Ÿã€</p>
                    <p class="text-2xl font-serif glow">ã€Œç¾åœ¨ï¼Œä½ è¦å»å‰µé€ ä»€éº¼ï¼Ÿã€</p>
                </div>
                
                <p class="text-gray-600">éœè¬æ£®æ—æ°¸é ç‚ºä½ æ•é–‹ã€‚</p>
                <p class="text-gray-600">å†æœƒã€‚</p>
            </div>
        </div>
    </div>

    <script>
        // å„²å­˜æ—…ç¨‹è³‡æ–™
        let journeyData = {
            day1: {},
            day2: {},
            day3: {},
            day4: {},
            day5: {},
            currentDay: 0
        };
        
        // Debug æ¨¡å¼
        const DEBUG = true;

        // å¾ localStorage è¼‰å…¥é€²åº¦
        function loadProgress() {
            const saved = localStorage.getItem('aliceJourney');
            if (saved) {
                journeyData = JSON.parse(saved);
            }
        }

        // å„²å­˜é€²åº¦
        function saveProgress() {
            localStorage.setItem('aliceJourney', JSON.stringify(journeyData));
        }

        // é–‹å§‹æ—…ç¨‹
        function startJourney() {
            document.getElementById('startScreen').classList.add('hidden');
            document.getElementById('day1').classList.remove('hidden');
            document.getElementById('day1-falling').classList.remove('hidden');
            journeyData.currentDay = 1;
            saveProgress();
        }

        // Day 1 Functions
        function day1Land() {
            document.getElementById('day1-falling').classList.add('hidden');
            document.getElementById('day1-forest').classList.remove('hidden');
        }

        function day1Found() {
            document.getElementById('day1-forest').classList.add('hidden');
            document.getElementById('day1-gaze').classList.remove('hidden');
        }

        function day1PhotoUploaded(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    journeyData.day1.photo = e.target.result;
                    document.getElementById('day1-gaze').classList.add('hidden');
                    document.getElementById('day1-key').classList.remove('hidden');
                    
                    // é¡¯ç¤ºç…§ç‰‡
                    document.getElementById('uploadedPhotoContainer').innerHTML = 
                        `<img src="${e.target.result}" class="w-full rounded-lg mb-4">`;
                    saveProgress();
                };
                reader.readAsDataURL(file);
            }
        }

        function forgeKey() {
            const keyWord = document.getElementById('keyWord').value;
            if (keyWord) {
                journeyData.day1.key = keyWord;
                document.getElementById('day1-key').classList.add('hidden');
                document.getElementById('day1-door').classList.remove('hidden');
                document.getElementById('keyDisplay').textContent = keyWord;
                saveProgress();
            }
        }

        function completeDay1() {
            const memory = document.getElementById('day1Memory').value;
            journeyData.day1.memory = memory;
            journeyData.currentDay = 2;
            saveProgress();
            
            // è½‰åˆ°ç¬¬äºŒå¤©
            document.getElementById('day1').classList.add('hidden');
            document.getElementById('day2').classList.remove('hidden');
            document.getElementById('day2-reflection').classList.remove('hidden');
            
            // é¡¯ç¤ºé‘°åŒ™æé†’
            document.getElementById('day2KeyReminder').textContent = journeyData.day1.key;
        }

        // Day 2 Functions
        function day2Mirror() {
            document.getElementById('day2-reflection').classList.add('hidden');
            document.getElementById('day2-writing').classList.remove('hidden');
        }

        function addIAm(event) {
            if (event.key === 'Enter' && event.target.value) {
                const list = document.getElementById('iAmList');
                const newDiv = document.createElement('div');
                newDiv.className = 'p-2 bg-gray-900 rounded cursor-move';
                newDiv.textContent = 'æˆ‘æ˜¯' + event.target.value;
                newDiv.draggable = true;
                list.insertBefore(newDiv, list.lastElementChild);
                event.target.value = '';
            }
        }

        function day2Sort() {
            const items = document.querySelectorAll('#iAmList div');
            journeyData.day2.statements = Array.from(items).map(i => i.textContent);
            
            document.getElementById('day2-writing').classList.add('hidden');
            document.getElementById('day2-threads').classList.remove('hidden');
            
            // é¡¯ç¤ºæ‰€æœ‰é™³è¿°ä¾›åˆ†é¡
            items.forEach(item => {
                item.onclick = function() {
                    if (this.parentElement.id === 'goldThreads') {
                        document.getElementById('silverThreads').appendChild(this);
                    } else {
                        document.getElementById('goldThreads').appendChild(this);
                    }
                };
            });
        }

        function day2Record() {
            document.getElementById('day2-threads').classList.add('hidden');
            document.getElementById('day2-frequency').classList.remove('hidden');
        }

        function toggleRecording() {
            // æ¨¡æ“¬éŒ„éŸ³
            const btn = document.getElementById('recordBtn');
            btn.classList.toggle('bg-red-900');
            btn.classList.toggle('bg-opacity-30');
        }

        function completeDay2() {
            journeyData.currentDay = 3;
            saveProgress();
            
            document.getElementById('day2').classList.add('hidden');
            document.getElementById('day3').classList.remove('hidden');
            document.getElementById('day3-invitation').classList.remove('hidden');
        }

        // Day 3 Functions
        function day3Gifts() {
            document.getElementById('day3-invitation').classList.add('hidden');
            document.getElementById('day3-gifts').classList.remove('hidden');
        }

        function day3PhotoUploaded(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    journeyData.day3.photo = e.target.result;
                    document.getElementById('day3-gifts').classList.add('hidden');
                    document.getElementById('day3-dialogue').classList.remove('hidden');
                    
                    document.getElementById('day3PhotoContainer').innerHTML = 
                        `<img src="${e.target.result}" class="w-full rounded-lg mb-4">`;
                    saveProgress();
                };
                reader.readAsDataURL(file);
            }
        }

        function day3KeyGiving() {
            journeyData.day3.messages = {
                msg1: document.getElementById('day3msg1').value,
                msg2: document.getElementById('day3msg2').value,
                msg3: document.getElementById('day3msg3').value
            };
            
            document.getElementById('day3-dialogue').classList.add('hidden');
            document.getElementById('day3-keygiving').classList.remove('hidden');
            
            // ç¢ºä¿æœ‰ key æ‰é¡¯ç¤º
            if (journeyData.day1 && journeyData.day1.key) {
                document.getElementById('day3KeyDisplay').textContent = journeyData.day1.key;
            } else {
                document.getElementById('day3KeyDisplay').textContent = 'ä½ çš„é‘°åŒ™';
            }
            
            saveProgress();
        }

        function giveKeyTo(recipient) {
            journeyData.day3.keyRecipient = recipient;
            document.getElementById('keyGivingReason').classList.remove('hidden');
            saveProgress();
        }

        function completeDay3() {
            if (DEBUG) console.log('Completing Day 3...');
            
            const changeElement = document.getElementById('day3Change');
            if (changeElement) {
                journeyData.day3.change = changeElement.value;
            }
            
            journeyData.currentDay = 4;
            saveProgress();
            
            if (DEBUG) console.log('Journey Data:', journeyData);
            
            // ç¢ºä¿å…ƒç´ å­˜åœ¨å†éš±è—/é¡¯ç¤º
            const day3Element = document.getElementById('day3');
            const day4Element = document.getElementById('day4');
            const day4GardenElement = document.getElementById('day4-garden');
            
            if (day3Element) day3Element.classList.add('hidden');
            if (day4Element) day4Element.classList.remove('hidden');
            if (day4GardenElement) day4GardenElement.classList.remove('hidden');
        }

        // Day 4 Functions
        function day4BodyMap() {
            const laws = [
                document.getElementById('law1').value,
                document.getElementById('law2').value,
                document.getElementById('law3').value
            ];
            
            journeyData.day4.laws = laws;
            
            document.getElementById('day4-garden').classList.add('hidden');
            document.getElementById('day4-body').classList.remove('hidden');
            
            const container = document.getElementById('lawsWithBody');
            container.innerHTML = laws.map((law, i) => `
                <div>
                    <p class="text-red-400 mb-2">æ³•å‰‡ ${i+1}: ${law}</p>
                    <input type="text" id="body${i}" placeholder="èº«é«”æ„Ÿå—..." 
                           class="w-full bg-transparent border-b border-gray-700 py-2 focus:outline-none">
                </div>
            `).join('');
            
            saveProgress();
        }

        function day4Release() {
            journeyData.day4.bodyFeelings = [
                document.getElementById('body0').value,
                document.getElementById('body1').value,
                document.getElementById('body2').value
            ];
            
            document.getElementById('day4-body').classList.add('hidden');
            document.getElementById('day4-release').classList.remove('hidden');
            saveProgress();
        }

        function day4Rewrite() {
            document.getElementById('day4-release').classList.add('hidden');
            document.getElementById('day4-rewrite').classList.remove('hidden');
            
            const container = document.getElementById('lawsRewrite');
            container.innerHTML = journeyData.day4.laws.map((law, i) => `
                <div>
                    <p class="text-red-400 mb-2">èˆŠæ³•å‰‡: ${law}</p>
                    <textarea id="newLaw${i}" rows="2" placeholder="é‹ç”¨æœ‹å‹å€‘çš„åŠ›é‡ï¼Œæ”¹å¯«ç‚º..." 
                              class="w-full bg-transparent border border-gray-700 rounded-lg p-3 focus:outline-none"></textarea>
                </div>
            `).join('');
        }

        function completeDay4() {
            journeyData.day4.newLaws = [
                document.getElementById('newLaw0').value,
                document.getElementById('newLaw1').value,
                document.getElementById('newLaw2').value
            ];
            journeyData.currentDay = 5;
            saveProgress();
            
            document.getElementById('day4').classList.add('hidden');
            document.getElementById('day5').classList.remove('hidden');
            document.getElementById('day5-awake').classList.remove('hidden');
        }

        // Day 5 Functions
        function day5PhotoUploaded(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    journeyData.day5.photo = e.target.result;
                    document.getElementById('day5-awake').classList.add('hidden');
                    document.getElementById('day5-map').classList.remove('hidden');
                    
                    // ç”Ÿæˆåœ°åœ–
                    generateAliceMap();
                    saveProgress();
                };
                reader.readAsDataURL(file);
            }
        }

        function generateAliceMap() {
            const mapContainer = document.getElementById('aliceMap');
            mapContainer.innerHTML = `
                <div class="border-l-2 border-gray-700 pl-6">
                    <h4 class="text-orange-400 mb-2">ğŸ•³ï¸ å…”å­æ´å…¥å£</h4>
                    <p class="text-gray-400">ä½ å¸¶è‘—åç‚ºã€Œ${journeyData.day1.key}ã€çš„é‘°åŒ™è·Œå…¥...</p>
                </div>
                <div class="border-l-2 border-gray-700 pl-6">
                    <h4 class="text-green-400 mb-2">ğŸ› æ¯›æ¯›èŸ²çš„è˜‘è‡</h4>
                    <p class="text-gray-400">å€åˆ†äº†é‡‘è‰²èˆ‡éŠ€è‰²çš„çµ²ç·š...</p>
                </div>
                <div class="border-l-2 border-gray-700 pl-6">
                    <h4 class="text-purple-400 mb-2">ğŸ© ç˜‹å¸½åŒ çš„èŒ¶æ¡Œ</h4>
                    <p class="text-gray-400">ä¸‰ä½æœ‹å‹äº¤æ›äº†ç¦®ç‰©ï¼Œé‘°åŒ™äº¤çµ¦äº†${journeyData.day3.keyRecipient}...</p>
                </div>
                <div class="border-l-2 border-gray-700 pl-6">
                    <h4 class="text-red-400 mb-2">â™¥ï¸ ç´…å¿ƒçš‡åçš„èŠ±åœ’</h4>
                    <p class="text-gray-400">æ”¹å¯«äº†å…§å¿ƒçš„æ³•å‰‡...</p>
                </div>
                <div class="border-l-2 border-gray-700 pl-6">
                    <h4 class="text-blue-400 mb-2">ğŸŒ… èŠ±åœ’çš„å‡ºå£</h4>
                    <img src="${journeyData.day5.photo}" class="w-32 h-32 object-cover rounded-lg mt-2">
                </div>
            `;
        }

        function day5Letter() {
            document.getElementById('day5-map').classList.add('hidden');
            document.getElementById('day5-letter').classList.remove('hidden');
        }

        function completeJourney() {
            journeyData.day5.letter = document.getElementById('futureLetter').value;
            journeyData.completed = true;
            saveProgress();
            
            document.getElementById('day5-letter').classList.add('hidden');
            document.getElementById('day5-end').classList.remove('hidden');
            
            // 30å¤©å¾Œç™¼é€æé†’ï¼ˆå¯¦éš›æ‡‰ç”¨éœ€è¦å¾Œç«¯æ”¯æ´ï¼‰
            console.log('Journey completed!', journeyData);
        }

        // åˆå§‹åŒ–
        window.addEventListener('DOMContentLoaded', () => {
            loadProgress();
            
            // å¦‚æœæœ‰é€²åº¦ï¼Œæ¢å¾©åˆ°ç•¶å‰å¤©æ•¸
            if (journeyData.currentDay > 0) {
                // å¯¦ç¾é€²åº¦æ¢å¾©é‚è¼¯
            }
        });
    </script>
</body>
</html>